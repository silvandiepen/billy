<div class="invoice">
  <header :class="bem(block,'header')">
    <h3>Invoice #{{invoiceNumber(invoice.current.number)}}</h3>
  </header>

  <section :class="bem(block,'client')">
    <InvoiceEntity :entity="invoice.client" />
  </section>

  <section :class="bem(block,'seller')">
    <InvoiceEntity :entity="invoice.seller" />
  </section>

  <section :class="bem(block,'data')">
    <ul :class="bem(block,'list')">
      <li :class="bem(block,'item')" v-for="entry in invoice.current.data">
        <h5 :class="[bem(block,'item','title'), 'cell']" v-if="entry.title">
          {{entry.title}}
        </h5>
        <span :class="[bem(block,'item','amount'), 'cell']" v-if="entry.amount"
          >{{entry.amount}}</span
        >
        <span
          :class="[bem(block,'item','total'), 'cell',  entry.discount && bem(block,'item','has-discount')]"
          v-if="entry.price"
        >
          <span>{{formatNumber(entry.amount * entry.price)}}</span>
          <span
            :class="bem(block,'item','total-discount')"
            v-if="entry.discount"
            >{{formatNumber(discount(entry.amount * entry.price,
            entry.discount))}}</span
          >
        </span>
        <p
          :class="[bem(block,'item','description'), 'cell']"
          v-if="entry.description"
        >
          {{entry.description}}
        </p>
        <span :class="bem(block,'item','discount')" v-if="entry.discount">
          - {{entry.discount}}% discount
        </span>
      </li>
    </ul>
  </section>

  <section :class="bem(block,'totals')">
    <ul :class="bem(block,'list')">
      <li :class="[bem(block,'total')]">
        <span :class="bem(block,'total','space')"></span>
        <span :class="[bem(block,'total','label'), 'cell']">{{t('sum')}}</span>
        <span :class="[bem(block,'total','total'), 'cell']">
          {{ formatNumber(sum) }}
        </span>
      </li>
      <li :class="bem(block,'total')">
        <span :class="bem(block,'total','space')"></span>
        <span :class="[bem(block,'total','label'), 'cell']"
          >{{t('vat', invoice.settings.tax)}}
        </span>
        <span :class="[bem(block,'total','total'), 'cell']">
          {{ formatNumber(tax) }}
        </span>
      </li>
      <li :class="bem(block,'total')">
        <span :class="bem(block,'total','space')"></span>
        <span :class="[bem(block,'total','label'), 'cell']"
          >{{t('total')}}</span
        >
        <span :class="[bem(block,'total','total'), 'cell']">
          {{ formatNumber(total) }}
        </span>
      </li>
    </ul>
  </section>

  <section :class="bem(block,'payment')">
    <dl :class="bem(block,'payment')"></dl>
  </section>
  <section :class="bem(block,'notes')">
    <dl
      :class="bem(block,'note')"
      v-for="(note,index) in invoice.settings.notes"
      :key="index"
    >
      <dt :class="(block,'note','title')" v-if="note.title">{{note.title}}</dt>
      <dd :class="(block,'note','description')" v-if="note.description">
        {{note.description}}
      </dd>
    </dl>
  </section>
</div>
