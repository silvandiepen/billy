<div>
  <section :class="style.bem('section')" v-if="invoice.current">
    <FormNumber :label="`${t('invoice')} #`" v-model="invoice.current.number" />
    <FormNumber :label="t('vat')" v-model="invoice.settings.tax" />
    <FormSelect
      :label="t('currency')"
      :options="currencyOptions"
      v-model="invoice.settings.currency"
    />
    <FormText
      :label="t('logo')"
      v-model="invoice.settings.logo"
      v-if="invoice.settings.logo.length < 100"
    />
    <FormTextArea
      :label="t('logo')"
      v-model="invoice.settings.logo"
      v-if="invoice.settings.logo.length > 100"
    />
  </section>

  <section :class="style.bem('section')">
    <h3 :class="style.bem('subheader')">{{t('item',2)}}</h3>

    <ul :class="style.bem('items')">
      <InvoiceItemForm
        tag="li"
        :class="style.bem('item')"
        :item="item"
        v-for="(item,index) in invoice.current.data"
        :key="index"
      />
    </ul>
    <KnoppenBar :align="ButtonAlign.CENTER">
      <Knop
        :class="style.bem('add')"
        @click="actions.newEntry"
        :icon="ButtonIcon.ADD"
      >
        {{t('action.add-item')}}
      </Knop>
    </KnoppenBar>
  </section>

  <section :class="style.bem('section')">
    <h3 :class="style.bem('subheader')">
      {{t('client')}}
      <div class="label">{{invoice.client.id}}</div>
    </h3>

    <InvoiceEntity
      v-show="!editting.client"
      @click="toggleShow('client')"
      :entity="invoice.client"
    />

    <InvoiceEntityForm
      v-show="editting.client"
      :class="style.bem('entity')"
      :entity="invoice.client"
    />

    <KnoppenBar>
      <Knop @click="showModal(ModalIdentifier.CLIENTS_LIST)">
        {{ t('action.show-clients')}}
      </Knop>
      <Knop @click="toggleShow('client')" :icon="ButtonIcon.EDIT"
        >{{!editting.client ? 'Edit Client' : 'Stop Edit'}}</Knop
      >
      <Knop @click="addClient" v-if="showSaveClient"> Save client </Knop>
      <Knop @click="addNewClient" v-if="showSaveNewClient">
        Save as new client
      </Knop>
    </KnoppenBar>
  </section>

  <section :class="style.bem('section')">
    <h3 :class="style.bem('subheader')">
      Seller
      <div class="label">{{invoice.seller.id}}</div>
    </h3>
    <InvoiceEntity
      v-show="!editting.seller"
      @click="editting.seller = true"
      :entity="invoice.seller"
    />
    <InvoiceEntityForm
      v-show="editting.seller"
      :class="style.bem('entity')"
      :entity="invoice.seller"
    />

    <KnoppenBar>
      <Knop @click="toggleShow('seller')" :icon="ButtonIcon.EDIT"
        >{{!editting.seller ? 'Edit Seller' : 'Stop Edit'}}</Knop
      >
      <Knop @click="addNewSeller" v-if="showSaveNewSeller">
        Save as new seller
      </Knop>
    </KnoppenBar>
  </section>

  <section :class="style.bem('section')">
    <h3 :class="style.bem('subheader')">{{t('note',2)}}</h3>

    <ul :class="style.bem('items')">
      <InvoiceNoteForm
        tag="li"
        :class="style.bem('item')"
        :item="item"
        v-for="(item,index) in invoice.settings.notes"
        :key="index"
      />
    </ul>
    <KnoppenBar :align="ButtonAlign.CENTER">
      <Knop
        :class="style.bem('add')"
        @click="actions.newNote"
        :icon="ButtonIcon.ADD"
      >
        {{t('action.add-item')}}
      </Knop>
    </KnoppenBar>
  </section>

  <section :class="style.bem('section')">
    <h3 :class="style.bem('subheader')">Footer</h3>
    <FormTextArea v-model="invoice.settings.footer"></FormTextArea>
  </section>

  <section :class="style.bem('section')">
    <KnoppenBar>
      <Knop @click="actions.saveInvoice" icon="arrow-down">Save</Knop>
      <Knop @click="actions.export" icon="arrow-down">Export</Knop>
    </KnoppenBar>
  </section>
  <!-- 
  <Modal :identifier="ModalIdentifier.ClIENT_FORM"> </Modal>

  <Modal :identifier="ModalIdentifier.SELLER_FORM"> </Modal> -->

  <Modal :identifier="ModalIdentifier.CLIENTS_LIST">
    <Clients />
  </Modal>
</div>
